<div id=view>{{with .TargetRecord}}{{$id := .Index}}{{$r := .Record}}
  <button class="ctrl" hx-get="/" hx-target="body">
    Close
  </button>
  <table>
    <tr><th>Label:</th>
      <td>{{$r.Label}}</td>
      <th>{{if $r.Password}}Password:{{else}}Hashpass:{{end}}</th>
      <td>
        <button class="copyable"
                hx-get="/password/{{$id}}"
                hx-target="#pwval"
                hx-swap="outerHTML"
                hx-include='select[name="tag"]'>
          Copy
        </button>
        <input id="pwval" type="hidden" value="" />
      <td>
    </tr>
    <tr><th>Title:</th>
      <td>{{$r.Title}}</td>{{if $r.Tags}}
      <th>Tags:</th>
      <td>
        <select name="tag">
          <option value="">(none)</option>{{range $r.Tags}}
          <option value="{{.}}">{{.}}</option>{{end}}
        </select>
      </td>{{end}}
    </tr>
    <tr><th>Host:</th>
      <td class="copyable">{{index $r.Hosts 0}}</td>{{if $r.OTP}}
      <th>OTP:</th>
      <td>
        <button class="copyable"
                hx-get="/totp/{{$id}}"
                hx-target="#otpval"
                hx-swap="outerHTML">
          Copy
        </button>
        <input id="otpval" type="hidden" value="" />
      </td>{{end}}
    </tr>{{if $r.Username}}
    <tr><th>Username:</th>
      <td class="copyable">{{$r.Username}}</td>
    </tr>{{end}}{{if $r.Addrs}}
    <tr><th>Address:</th>
      <td class="copyable">{{index $r.Addrs 0}}</td>
    </tr>{{end}}{{if $r.Notes}}
    <tr>
      <th>Notes:</th>
      <td colspan="3"><pre>{{$r.Notes}}</pre></td>
    </tr>{{end}}
  </table>{{if $r.Details}}
  <table>
    <tr><th>Details</th><th colspan=2>Value</th></tr>
    {{range $index, $d := $r.Details}}<tr>
      <th>{{$d.Label}}</th>
      {{if $d.Hidden -}}
      <td>
        <button hx-get="/detail/{{$id}}/{{$index}}" hx-target="closest tr">Show</button>
      </td>
      <td>(hidden)</td>{{else}}
      <td class="notes copyable" colspan="2">
        <pre>{{$d.Value}}</pre>
      </td>{{end}}
    </tr>{{end}}
  </table>{{end}}
{{end}}</div>
